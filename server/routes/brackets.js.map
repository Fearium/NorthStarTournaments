{"version":3,"sources":["routes/brackets.ts"],"names":[],"mappings":";AAAA,IAAO,OAAO,WAAW,SAAS,CAAC,CAAC;AAEpC,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;AAK9B,IAAO,eAAe,WAAW,uBAAuB,CAAC,CAAC;AAG1D,IAAO,UAAU,GAAG,eAAe,CAAC,UAAU,CAAC;AAG/C,wDAAwD;AACxD,qBAAqB,GAAmB,EAAE,GAAoB,EAAE,IAAS;IACrE,iCAAiC;IACjC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;QACzB,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC;IACD,IAAI,EAAE,CAAC;AACX,CAAC;AAED,kDAAkD;AAClD,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,WAAW,EAAE,UAAC,GAAoB,EAAE,GAAqB,EAAE,IAAS;IAEhF,oDAAoD;IACpD,UAAU,CAAC,IAAI,CAAC,UAAC,KAAK,EAAE,WAAW;QAC/B,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACR,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACnB,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACnB,CAAC;QACD,IAAI,CAAC,CAAC;YACF,qCAAqC;YACrC,GAAG,CAAC,MAAM,CAAC,gBAAgB,EAAE;gBACzB,KAAK,EAAE,SAAS;gBAChB,WAAW,EAAE,WAAW;gBACxB,QAAQ,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,EAAE;aAC9C,CAAC,CAAC;QACP,CAAC;IACL,CAAC,CAAC,CAAC;AACP,CAAC,CAAC,CAAC;AAGH,mBAAmB;AACnB,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC","file":"routes/brackets.js","sourcesContent":["import express = require('express');\r\nimport passport = require('passport');\r\nvar router = express.Router();\r\n\r\n// db references\r\nimport mongoose = require('mongoose');\r\n\r\nimport tournamentModel = require('../models/tournaments');\r\nimport teamModel = require('../models/team');\r\n\r\nimport Tournament = tournamentModel.Tournament;\r\nimport Team = teamModel.Team;\r\n\r\n/* Utility Function to check if user is authenticated */\r\nfunction requireAuth(req:express.Request, res:express.Response, next: any) {\r\n    // check if the user is logged in\r\n    if (!req.isAuthenticated()) {\r\n        return res.redirect('/login');\r\n    }\r\n    next();\r\n}\r\n\r\n// GET - show main users page - list all the users\r\nrouter.get('/', requireAuth, (req: express.Request, res: express.Response, next: any) => {\r\n   \r\n    // use the Users model to query the Users collection\r\n    Tournament.find((error, tournaments) => {\r\n        if (error) {\r\n            console.log(error);\r\n            res.end(error);\r\n        }\r\n        else {\r\n            // no error, we found a list of users\r\n            res.render('brackets/index', {\r\n                title: 'Bracket',\r\n                tournaments: tournaments,\r\n                userName: req.user ? req.user.username : ''\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n\r\n// make this public\r\nmodule.exports = router;"],"sourceRoot":"/source/"}